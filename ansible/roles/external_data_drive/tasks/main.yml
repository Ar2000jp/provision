---
- name: Creating {{ data_dir }}/bin
  file:
    path: "{{ data_dir }}/bin"
    state: directory

- name: Adding drive setup script
  template:
    src: "mount_external_drive.j2"
    dest: "{{ data_dir }}/bin/mount_external_drive"
    owner: root
    mode: 0744

- name: Creating mountpoint {{ external_data_drive.mountpoint }}
  file:
    path: "{{ external_data_drive.mountpoint }}"
    state: directory

- name: Adding udev rule
  template:
    src: "data_drive.rules.j2"
    dest: "/etc/udev/rules.d/data_drive.rules"
